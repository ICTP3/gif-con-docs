<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gif-Con ドキュメントポータル</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <!-- ヘッダー内を横並びにするためのラッパー -->
    <div class="header-content">
      <!-- 🔹 左側にロゴ画像を追加 -->
      <img src="スタジオジフリ2.png" alt="Gif-Con ロゴ" class="logo">

      <!-- 🔹 右側にタイトルとサブタイトル -->
      <div class="header-text">
        <h1>Gif-Con ドキュメントポータル</h1>
        <p class="subtitle">主要リンク一覧</p>
      </div>
      <!-- 🔹 ダークモード切り替えボタン -->
      <button id="theme-toggle" class="theme-toggle">🌙</button>
    </div>
  </header>

  <main class="container">
    <!-- 検索バーとタグ -->
    <div class="toolbar">
      <input id="search" class="search" placeholder="🔍 検索（タイトル・説明・タグ）">
      <div id="tags"></div>
    </div>

    <!-- カード一覧 -->
    <div id="grid" class="grid"></div>
    <div id="empty" class="empty" style="display:none;">該当する項目がありません。</div>
  </main>

  <script>
    // ==========================
    // 表示するリンクデータ一覧
    // ==========================
    const docs = [
      {
        id:"api",
        title:"API仕様書",
        desc:"Gif-Con の REST API エンドポイント仕様を確認",
        url:"https://ictp3.github.io/gif-con-docs/viewer/",
        tags:["API"],
        date:"2025-10-23"
      },
      {
        id:"backend",
        title:"バックエンド リポジトリ",
        desc:"サーバーサイド実装",
        url:"https://github.com/ICTP3/gif-con-backend",
        tags:["GitHub","バックエンド"],
        date:"2025-10-23"
      },
      {
        id:"frontend",
        title:"フロントエンド リポジトリ",
        desc:"UI実装",
        url:"https://github.com/ICTP3/gif-con-frontend",
        tags:["GitHub","フロントエンド"],
        date:"2025-10-23"
      },
      {
        id:"wbs",
        title:"WBS & ガントチャート",
        desc:"進行管理・タスクスケジュール",
        url:"https://www.notion.so/Gif-Con-WBS-2863c4e0672781b3a4fbed45c057ea1d",
        tags:["Notion","スケジュール"],
        date:"2025-10-23"
      }
    ];

    const grid = document.getElementById('grid');
    const search = document.getElementById('search');
    const tagBox = document.getElementById('tags');
    const emptyMsg = document.getElementById('empty');
    let activeTag = null;

    // タグ生成
    function renderTags(){
      const tags = [...new Set(docs.flatMap(d=>d.tags))];
      tagBox.innerHTML = tags.map(t=>`<span class="tag" data-tag="${t}">${t}</span>`).join('');
      tagBox.querySelectorAll('.tag').forEach(el=>{
        el.onclick = ()=>{
          activeTag = (activeTag === el.dataset.tag) ? null : el.dataset.tag;
          renderTags();
          renderDocs();
        };
        if(activeTag === el.dataset.tag) el.classList.add('active');
      });
    }

    // カード描画
    function renderDocs(){
      const q = search.value.trim().toLowerCase();
      const filtered = docs.filter(d=>{
        const matchesTag = !activeTag || d.tags.includes(activeTag);
        const hay = (d.title+d.desc+d.tags.join(" ")).toLowerCase();
        return matchesTag && (!q || hay.includes(q));
      });

      grid.innerHTML = filtered.map(d=>`
        <a class="card" href="${d.url}" target="_blank" rel="noopener noreferrer">
          <h3 class="title">${d.title}</h3>
          <p class="desc">${d.desc}</p>
          <div class="meta">${d.date}</div>
        </a>
      `).join('');

      emptyMsg.style.display = filtered.length ? "none" : "block";
    }

    search.addEventListener("input", renderDocs);
    renderTags();
    renderDocs();
  </script>
</body>
</html>

<script>
  // 既存のスクリプトの最後に追加
  const toggleBtn = document.getElementById("theme-toggle");

  // 保存済みのテーマ設定を読み込み
  const savedTheme = localStorage.getItem("theme") || "light";
  document.documentElement.setAttribute("data-theme", savedTheme);
  toggleBtn.textContent = savedTheme === "dark" ? "☀️" : "🌙";

  // ボタンクリックでテーマを切り替え
  toggleBtn.addEventListener("click", () => {
    const current = document.documentElement.getAttribute("data-theme");
    const next = current === "light" ? "dark" : "light";
    document.documentElement.setAttribute("data-theme", next);
    localStorage.setItem("theme", next);
    toggleBtn.textContent = next === "dark" ? "☀️" : "🌙";
  });
</script>

